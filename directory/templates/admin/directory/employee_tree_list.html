{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block extrahead %}
    {{ block.super }}
    <script src="{% static 'directory/js/employee_tree_documents.js' %}"></script>
{% endblock %}

{% block object-tools %}
  <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ -->
  <div class="object-tools">
    <ul class="object-tools">
      <li>
        <a href="{% url 'admin:directory_employee_add' %}" class="addlink">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</a>
      </li>
      <li>
        <a href="#" id="generate-documents-btn" class="btn" style="display: none;">üìÑ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã</a>
      </li>
    </ul>
  </div>
{% endblock %}

{% block content %}
  <h1>üë• –î–µ—Ä–µ–≤–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h1>
  <ul>
    {% for organization, org_group in employee_tree.items %}
      <li>
        <strong>üè¢ {{ organization.full_name_ru }}</strong>
        <ul>
          {% for subdivision, sub_group in org_group.items %}
            <li>
              {% if subdivision == "–ë–µ–∑ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è" %}
                <em>–ë–µ–∑ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è</em>
              {% else %}
                üè≠ {{ subdivision.name }}
              {% endif %}
              <ul>
                {% for department, employees in sub_group.items %}
                  <li>
                    {% if department == "–ë–µ–∑ –æ—Ç–¥–µ–ª–∞" %}
                      <em>–ë–µ–∑ –æ—Ç–¥–µ–ª–∞</em>
                    {% else %}
                      üìÇ {{ department.name }}
                    {% endif %}
                    <ul>
                      {% for employee in employees %}
                        <li>
                          <input type="checkbox" class="action-select" value="{{ employee.id }}">
                          üë§ {{ employee.full_name_nominative }} ‚Äì {{ employee.position.position_name }}
                        </li>
                      {% endfor %}
                    </ul>
                  </li>
                {% endfor %}
              </ul>
            </li>
          {% endfor %}
        </ul>
      </li>
    {% endfor %}
  </ul>
{% endblock %}