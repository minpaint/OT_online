{% extends 'base.html' %}
{% load static %}

{% block title %}{{ title }}{% endblock %}

{% block extra_css %}
<style>
/* –°—Ç–∏–ª–∏ –¥–ª—è –ª–∏—á–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ —É—á–µ—Ç–∞ –°–ò–ó –ø–æ —Ñ–æ—Ä–º–µ –ú–ë-7 */
.siz-card-header {
    background-color: #007bff;
    color: white;
    padding: 0.75rem 1.5rem;
    font-weight: bold;
    border-top-left-radius: 4px;
    border-top-right-radius: 4px;
    text-align: center;
    font-size: 1.2rem;
}

.employee-info-section {
    padding: 10px;
    border-bottom: 1px solid #dee2e6;
}

.section-header {
    text-align: center;
    font-weight: bold;
    margin-bottom: 10px;
}

.employee-info-row {
    margin-bottom: 8px;
}

.employee-info-label {
    font-weight: bold;
}

.employee-info-value {
    border: 1px solid #999;
    padding: 3px 8px;
    min-height: 24px;
    background-color: #f9f9f9;
}

.siz-table {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
}

.siz-table th, 
.siz-table td {
    border: 1px solid #000;
    padding: 5px;
    text-align: center;
    vertical-align: middle;
}

.siz-table th {
    background-color: #f0f0f0;
    font-weight: bold;
}

.siz-table .siz-name {
    text-align: left;
    width: 35%;
}

.siz-table .siz-classification {
    width: 20%;
}

.siz-table .siz-unit {
    width: 10%;
}

.siz-table .siz-quantity {
    width: 15%;
}

.siz-table .siz-period {
    width: 20%;
}

.checkbox-column {
    width: 50px !important;
    text-align: center;
}

.siz-checkbox {
    transform: scale(1.2);
    cursor: pointer;
}

/* üÜï –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏ —Å—Ç—Ä–æ–∫ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
.siz-table tbody tr:not(.condition-row):hover {
    background-color: #f2f9ff;
    transition: background-color 0.2s ease;
    cursor: pointer;
}

.siz-table tbody tr:not(.condition-row):hover td {
    box-shadow: inset 0 0 0 1px #007bff;
}

.condition-row {
    background-color: #e6f2ff;
    font-style: italic;
}

/* üÜï –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞ –≤—Å–µ—Ö */
.select-all-wrapper {
    margin-bottom: 10px;
    text-align: right;
}

.select-all-btn {
    background-color: #f8f9fa;
    border: 1px solid #ddd;
    padding: 5px 10px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.9rem;
    transition: all 0.2s;
}

.select-all-btn:hover {
    background-color: #e9ecef;
    border-color: #ccc;
}

.select-all-btn i {
    margin-right: 5px;
}

/* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ */
.card-header {
    background-color: #f5f5f5;
    padding: 1rem;
}

.card-body {
    padding: 1.5rem;
}

.siz-group {
    margin-bottom: 1.5rem;
    border: 1px solid #dee2e6;
    border-radius: 4px;
}

.siz-table-container {
    overflow-x: auto;
}

.nav-link.active {
    background-color: #007bff !important;
    color: white !important;
}

.badge-active {
    background-color: #28a745;
    color: white;
}

.badge-returned {
    background-color: #dc3545;
    color: white;
}

.print-btn {
    margin-bottom: 1rem;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –ø–µ—á–∞—Ç–∏ */
@media print {
    .no-print {
        display: none !important;
    }

    .container {
        width: 100%;
        max-width: 100%;
    }

    .card {
        border: none !important;
    }

    .card-header {
        border-bottom: 1px solid #000 !important;
    }

    .table {
        border-collapse: collapse !important;
    }

    .table td,
    .table th {
        border: 1px solid #000 !important;
    }

    .employee-info-value {
        background-color: transparent !important;
    }

    .siz-card-header {
        background-color: transparent !important;
        color: black !important;
        border: 1px solid #000 !important;
        text-transform: uppercase;
    }

    .siz-table th {
        background-color: transparent !important;
    }

    .condition-row {
        background-color: transparent !important;
    }

    .checkbox-column, .issue-siz-button, .select-all-wrapper {
        display: none !important;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="container">
    <h1>{{ title }}</h1>

    <div class="row mb-3 no-print">
        <div class="col-md-6">
            <a href="{% url 'directory:siz:siz_issue_for_employee' employee.id %}" class="btn btn-primary">
                <i class="fas fa-plus"></i> –í—ã–¥–∞—Ç—å –Ω–æ–≤—ã–µ –°–ò–ó
            </a>
            <button onclick="window.print()" class="btn btn-secondary ml-2">
                <i class="fas fa-print"></i> –†–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É
            </button>
            <a href="{% url 'directory:siz:siz_personal_card_pdf' employee.id %}" class="btn btn-danger ml-2">
                <i class="fas fa-file-pdf"></i> –≠–∫—Å–ø–æ—Ä—Ç –≤ PDF (A4)
            </a> 
            
        </div>
    </div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –≤–∫–ª–∞–¥–∫–∞–º -->
    <ul class="nav nav-tabs mb-3 no-print" id="sizTabs" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="norms-tab" data-toggle="tab" href="#norms" role="tab" aria-controls="norms"
                aria-selected="true">–õ–∏—Ü–µ–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ (–ù–æ—Ä–º—ã –≤—ã–¥–∞—á–∏)</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="issued-tab" data-toggle="tab" href="#issued" role="tab" aria-controls="issued"
                aria-selected="false">–û–±–æ—Ä–æ—Ç–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ (–í—ã–¥–∞–Ω–Ω—ã–µ –°–ò–ó)
                <span class="badge badge-primary">{{ issued_items.count }}</span>
            </a>
        </li>
    </ul>

    <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∫–ª–∞–¥–æ–∫ -->
    <div class="tab-content" id="sizTabsContent">
        <!-- –í–∫–ª–∞–¥–∫–∞ "–ù–æ—Ä–º—ã –≤—ã–¥–∞—á–∏" (–õ–∏—Ü–µ–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞) -->
        <div class="tab-pane fade show active" id="norms" role="tabpanel" aria-labelledby="norms-tab">
            <div class="card">
                <div class="siz-card-header">
                    –õ–ò–ß–ù–ê–Ø –ö–ê–†–¢–û–ß–ö–ê ‚Ññ {{ employee.id }}
                    —É—á–µ—Ç–∞ —Å—Ä–µ–¥—Å—Ç–≤ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–π –∑–∞—â–∏—Ç—ã
                </div>
                <div class="card-body">
                    <!-- –°–≤–µ–¥–µ–Ω–∏—è –æ —Ä–∞–±–æ—Ç–Ω–∏–∫–µ -->
                    <div class="employee-info-section">
                        <h4 class="section-header">–°–≤–µ–¥–µ–Ω–∏—è –æ —Ä–∞–±–æ—Ç–Ω–∏–∫–µ</h4>
                        
                        <div class="row employee-info-row">
                            <div class="col-md-8 col-sm-7">
                                <div class="row">
                                    <div class="col-md-4 employee-info-label">–§–∞–º–∏–ª–∏—è, —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –∏–º—è, –æ—Ç—á–µ—Å—Ç–≤–æ (–µ—Å–ª–∏ —Ç–∞–∫–æ–≤–æ–µ –∏–º–µ–µ—Ç—Å—è):</div>
                                    <div class="col-md-8 employee-info-value">{{ employee.full_name_nominative }}</div>
                                </div>
                            </div>
                            <div class="col-md-2 col-sm-2">
                                <div class="row">
                                    <div class="col-md-4 employee-info-label">–ü–æ–ª</div>
                                    <div class="col-md-8 employee-info-value">{{ gender }}</div>
                                </div>
                            </div>
                            <div class="col-md-2 col-sm-3">
                                <div class="row">
                                    <div class="col-md-4 employee-info-label">–†–æ—Å—Ç</div>
                                    <div class="col-md-8 employee-info-value">{{ employee.height|default:"" }}</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row employee-info-row">
                            <div class="col-md-8 col-sm-7">
                                <div class="row">
                                    <div class="col-md-4 employee-info-label">–°—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–µ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ</div>
                                    <div class="col-md-8 employee-info-value">
                                        {% if employee.department %}
                                            {{ employee.department.name }}
                                        {% elif employee.subdivision %}
                                            {{ employee.subdivision.name }}
                                        {% else %}
                                            –ù–µ–ø—Ä–æ–¥–æ–≤–æ–ª—å—Å—Ç–≤–µ–Ω–Ω—ã–π –æ—Ç–¥–µ–ª
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-sm-5">
                                <div class="row">
                                    <div class="col-md-6 employee-info-label">–†–∞–∑–º–µ—Ä –æ–¥–µ–∂–¥—ã</div>
                                    <div class="col-md-6 employee-info-value">{{ employee.clothing_size|default:"" }}</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row employee-info-row">
                            <div class="col-md-8 col-sm-7">
                                <div class="row">
                                    <div class="col-md-4 employee-info-label">–ü—Ä–æ—Ñ–µ—Å—Å–∏—è (–¥–æ–ª–∂–Ω–æ—Å—Ç—å):</div>
                                    <div class="col-md-8 employee-info-value">{{ employee.position.position_name }}</div>
                                </div>
                            </div>
                            <div class="col-md-4 col-sm-5">
                                <div class="row">
                                    <div class="col-md-6 employee-info-label">–†–∞–∑–º–µ—Ä –æ–±—É–≤–∏</div>
                                    <div class="col-md-6 employee-info-value">{{ employee.shoe_size|default:"" }}</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row employee-info-row">
                            <div class="col-md-8 col-sm-7">
                                <div class="row">
                                    <div class="col-md-4 employee-info-label">–î–∞—Ç–∞ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è –Ω–∞ —Ä–∞–±–æ—Ç—É</div>
                                    <div class="col-md-8 employee-info-value">{{ employee.date_of_birth|date:"d.m.Y" }}</div>
                                </div>
                            </div>
                            <div class="col-md-4 col-sm-5">
                                <div class="row">
                                    <div class="col-md-6 employee-info-label">–°–ò–ó –≥–æ–ª–æ–≤—ã</div>
                                    <div class="col-md-6 employee-info-value">{{ siz_sizes.headgear }}</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row employee-info-row">
                            <div class="col-md-8 col-sm-7">
                                <!-- –ó–¥–µ—Å—å –±—ã–ª–∞ —Å—Ç—Ä–æ–∫–∞ "–î–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ (–¥–æ–ª–∂–Ω–æ—Å—Ç–∏)" - —É–¥–∞–ª–µ–Ω–∞ -->
                            </div>
                            <div class="col-md-4 col-sm-5">
                                <div class="row">
                                    <div class="col-md-6 employee-info-label">–°–ò–ó–û–î</div>
                                    <div class="col-md-6 employee-info-value">{{ siz_sizes.respirator }}</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row employee-info-row">
                            <div class="col-md-8 col-sm-7">
                                <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–∏–º–º–µ—Ç—Ä–∏–∏ -->
                            </div>
                            <div class="col-md-4 col-sm-5">
                                <div class="row">
                                    <div class="col-md-6 employee-info-label">–°–ò–ó —Ä—É–∫</div>
                                    <div class="col-md-6 employee-info-value">{{ siz_sizes.gloves }}</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- –ü—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –Ω–æ—Ä–º–∞–º -->
                    <div class="norms-section">
                        <h4 class="section-header mt-3 mb-3">–ü—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –Ω–æ—Ä–º–∞–º</h4>
                        
                        <!-- –§–æ—Ä–º–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ –°–ò–ó –∫ –≤—ã–¥–∞—á–µ -->
                        <form id="issue-siz-form" method="post" action="{% url 'directory:siz:siz_issue_for_employee' employee.id %}">
                            {% csrf_token %}
                            <input type="hidden" name="issue_selected_siz" value="1">
                            
                            <!-- üÜï –ö–Ω–æ–ø–∫–∞ "–í—ã–±—Ä–∞—Ç—å –≤—Å–µ/–°–Ω—è—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ" -->
                            <div class="select-all-wrapper no-print">
                                <button type="button" id="select-all-btn" class="select-all-btn">
                                    <i class="fas fa-check-square"></i> –°–Ω—è—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ
                                </button>
                            </div>
                            
                            <table class="table table-bordered siz-table">
                                <thead>
                                    <tr>
                                        <th class="siz-name">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–π –∑–∞—â–∏—Ç—ã</th>
                                        <th class="siz-classification">–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è (–º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞) —Å—Ä–µ–¥—Å—Ç–≤–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–π –∑–∞—â–∏—Ç—ã –ø–æ –∑–∞—â–∏—Ç–Ω—ã–º —Å–≤–æ–π—Å—Ç–≤–∞–º</th>
                                        <th class="siz-unit">–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è</th>
                                        <th class="siz-quantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                                        <th class="siz-period">–°—Ä–æ–∫ –Ω–æ—Å–∫–∏ –≤ –º–µ—Å—è—Ü–∞—Ö</th>
                                        <th class="checkbox-column">–í—ã–¥–∞—Ç—å</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for norm in base_norms %}
                                    <tr class="siz-item-row" data-id="{{ norm.id }}">
                                        <td class="siz-name">{{ norm.siz.name }}</td>
                                        <td class="siz-classification">{{ norm.siz.classification }}</td>
                                        <td class="siz-unit">{{ norm.siz.unit }}</td>
                                        <td class="siz-quantity">{{ norm.quantity }}</td>
                                        <td class="siz-period">
                                            {% if norm.siz.wear_period == 0 %}
                                            –î–æ –∏–∑–Ω–æ—Å–∞
                                            {% else %}
                                            {{ norm.siz.wear_period }}
                                            {% endif %}
                                        </td>
                                        <td class="checkbox-column">
                                            <input type="checkbox" name="selected_norms" value="{{ norm.id }}" class="siz-checkbox" checked>
                                        </td>
                                    </tr>
                                    {% endfor %}

                                    {% for group in condition_groups %}
                                    <tr class="condition-row">
                                        <td colspan="5">{{ group.name }}:</td>
                                        <td class="checkbox-column"></td>
                                    </tr>
                                    {% for norm in group.norms %}
                                    <tr class="siz-item-row" data-id="{{ norm.id }}">
                                        <td class="siz-name">{{ norm.siz.name }}</td>
                                        <td class="siz-classification">{{ norm.siz.classification }}</td>
                                        <td class="siz-unit">{{ norm.siz.unit }}</td>
                                        <td class="siz-quantity">{{ norm.quantity }}</td>
                                        <td class="siz-period">
                                            {% if norm.siz.wear_period == 0 %}
                                            –î–æ –∏–∑–Ω–æ—Å–∞
                                            {% else %}
                                            {{ norm.siz.wear_period }}
                                            {% endif %}
                                        </td>
                                        <td class="checkbox-column">
                                            <input type="checkbox" name="selected_norms" value="{{ norm.id }}" class="siz-checkbox" checked>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                    {% endfor %}
                                </tbody>
                            </table>
                            
                            <div class="text-center mt-3 no-print">
                                <button type="submit" class="btn btn-success issue-siz-button">
                                    <i class="fas fa-check-circle"></i> –í—ã–¥–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –°–ò–ó
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ "–í—ã–¥–∞–Ω–Ω—ã–µ –°–ò–ó" (–û–±–æ—Ä–æ—Ç–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞) –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
        <div class="tab-pane fade" id="issued" role="tabpanel" aria-labelledby="issued-tab">
            <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤—Ç–æ—Ä–æ–π –≤–∫–ª–∞–¥–∫–∏ –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
            <!-- ... -->
        </div>
    </div>

    <!-- –ë–ª–æ–∫ –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ (–ø—Ä–∏ –ø–µ—á–∞—Ç–∏) –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
    <div class="d-none d-print-block mt-5">
        <!-- ... -->
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // –ö–æ–¥ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–∫–ª–∞–¥–∫–∞–º–∏
        const hash = window.location.hash;
        if (hash) {
            const tab = document.querySelector(`a[href="${hash}"]`);
            if (tab) {
                tab.click();
            }
        }
        
        // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã –≤—ã–¥–∞—á–∏ –°–ò–ó
        const form = document.getElementById('issue-siz-form');
        if (form) {
            form.addEventListener('submit', function(e) {
                const checkboxes = document.querySelectorAll('input[name="selected_norms"]:checked');
                if (checkboxes.length === 0) {
                    e.preventDefault();
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –°–ò–ó –¥–ª—è –≤—ã–¥–∞—á–∏');
                }
            });
        }
        
        // üÜï –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ –≤—Å–µ—Ö/—Å–Ω—è—Ç–∏—è –≤—ã–¥–µ–ª–µ–Ω–∏—è —Å —á–µ–∫–±–æ–∫—Å–æ–≤
        const selectAllBtn = document.getElementById('select-all-btn');
        if (selectAllBtn) {
            selectAllBtn.addEventListener('click', function() {
                const checkboxes = document.querySelectorAll('.siz-checkbox');
                const allChecked = areAllCheckboxesChecked(checkboxes);
                
                checkboxes.forEach(checkbox => {
                    checkbox.checked = !allChecked;
                });
                
                updateSelectAllButtonText(!allChecked);
            });
            
            // üÜï –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –∫–Ω–æ–ø–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–µ–∫–±–æ–∫—Å–æ–≤
            function updateSelectAllButtonText(allChecked) {
                if (allChecked) {
                    selectAllBtn.innerHTML = '<i class="fas fa-check-square"></i> –°–Ω—è—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ';
                } else {
                    selectAllBtn.innerHTML = '<i class="fas fa-square"></i> –í—ã–±—Ä–∞—Ç—å –≤—Å–µ';
                }
            }
            
            // üÜï –ü—Ä–æ–≤–µ—Ä–∫–∞, –≤—Å–µ –ª–∏ —á–µ–∫–±–æ–∫—Å—ã –≤—ã–±—Ä–∞–Ω—ã
            function areAllCheckboxesChecked(checkboxes) {
                for (const checkbox of checkboxes) {
                    if (!checkbox.checked) return false;
                }
                return true;
            }
            
            // üÜï –°–ª—É—à–∞—Ç–µ–ª—å –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è —á–µ–∫–±–æ–∫—Å–æ–≤
            document.querySelectorAll('.siz-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const checkboxes = document.querySelectorAll('.siz-checkbox');
                    const allChecked = areAllCheckboxesChecked(checkboxes);
                    updateSelectAllButtonText(allChecked);
                });
            });
            
            // üÜï –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –Ω–∞ —Å—Ç—Ä–æ–∫—É –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —á–µ–∫–±–æ–∫—Å–∞
            document.querySelectorAll('.siz-item-row').forEach(row => {
                row.addEventListener('click', function(e) {
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–ª–∏–∫ –±—ã–ª –Ω–µ –Ω–∞ —Å–∞–º–æ–º —á–µ–∫–±–æ–∫—Å–µ –∏ –Ω–µ –Ω–∞ –¥—Ä—É–≥–æ–º –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ
                    if (e.target.type !== 'checkbox' && e.target.tagName !== 'BUTTON' && e.target.tagName !== 'A') {
                        const checkbox = this.querySelector('.siz-checkbox');
                        checkbox.checked = !checkbox.checked;
                        
                        // –í—ã–∑—ã–≤–∞–µ–º —Å–æ–±—ã—Ç–∏–µ change –≤—Ä—É—á–Ω—É—é, —á—Ç–æ–±—ã —Å—Ä–∞–±–æ—Ç–∞–ª –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
                        const event = new Event('change');
                        checkbox.dispatchEvent(event);
                    }
                });
            });
        }
    });
</script>
{% endblock %}