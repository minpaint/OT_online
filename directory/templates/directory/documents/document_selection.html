{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col-md-8 offset-md-2">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">{{ title }}</h4>
                </div>
                <div class="card-body">
                    {% if employee %}
                    <div class="alert alert-info mb-4">
                        <h5>üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–µ</h5>
                        <p><strong>–§–ò–û:</strong> {{ employee.full_name_nominative }}</p>
                        <p><strong>–î–æ–ª–∂–Ω–æ—Å—Ç—å:</strong> {{ employee.position.position_name }}</p>
                        {% if employee.department %}
                        <p><strong>–û—Ç–¥–µ–ª:</strong> {{ employee.department.name }}</p>
                        {% endif %}
                        {% if employee.subdivision %}
                        <p><strong>–ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ:</strong> {{ employee.subdivision.name }}</p>
                        {% endif %}
                        <p><strong>–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è:</strong> {{ employee.organization.short_name_ru }}</p>
                    </div>
                    {% endif %}
                    
                    <form method="post" action="">
                        {% csrf_token %}
                        {% crispy form %}
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–≥–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
        const form = document.getElementById('document-selection-form');
        if (form) {
            form.addEventListener('submit', function(e) {
                const checkboxes = document.querySelectorAll('input[name="document_types"]:checked');
                if (checkboxes.length === 0) {
                    e.preventDefault();
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞.');
                }
            });
        }
    });
</script>
{% endblock %}