# üîê –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã —ç–∫–∑–∞–º–µ–Ω–æ–≤

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
2. [–°–∏—Å—Ç–µ–º–∞ —Ç–æ–∫–µ–Ω–æ–≤ –¥–æ—Å—Ç—É–ø–∞](#—Å–∏—Å—Ç–µ–º–∞-—Ç–æ–∫–µ–Ω–æ–≤-–¥–æ—Å—Ç—É–ø–∞)
3. [–ó–∞—â–∏—Ç–∞ –æ—Ç –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏](#–∑–∞—â–∏—Ç–∞-–æ—Ç-–∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏)
4. [Middleware –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](#middleware-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
5. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–¥–ª—è-–ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç—É–ø–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –û–°–ù–û–í–ù–û–ô –î–û–ú–ï–ù (localhost:8001)                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚úÖ –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ                              ‚îÇ
‚îÇ  ‚úÖ –ê–¥–º–∏–Ω–∫–∞ Django                                        ‚îÇ
‚îÇ  ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏, –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ–º               ‚îÇ
‚îÇ  ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–∞–º–µ–Ω–æ–≤ –∏ —Ç–æ–∫–µ–Ω–æ–≤                         ‚îÇ
‚îÇ  ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö                                 ‚îÇ
‚îÇ                                                           ‚îÇ
‚îÇ  üîí –ó–∞—â–∏—Ç–∞: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è Django              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  EXAM –ü–û–î–î–û–ú–ï–ù (exam.localhost:8001)                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üîê –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –¢–û–õ–¨–ö–û –∫ —ç–∫–∑–∞–º–µ–Ω–∞–º             ‚îÇ
‚îÇ  ‚ùå –ù–ï–¢ –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω–∫–µ                                ‚îÇ
‚îÇ  ‚ùå –ù–ï–¢ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥—Ä—É–≥–∏–º –¥–∞–Ω–Ω—ã–º                          ‚îÇ
‚îÇ  ‚úÖ –¢–û–õ–¨–ö–û —ç–∫–∑–∞–º–µ–Ω—ã —á–µ—Ä–µ–∑ —Ç–æ–∫–µ–Ω—ã                         ‚îÇ
‚îÇ                                                           ‚îÇ
‚îÇ  üîí –ó–∞—â–∏—Ç–∞: ExamSubdomainMiddleware + —Ç–æ–∫–µ–Ω—ã            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üé´ –°–∏—Å—Ç–µ–º–∞ —Ç–æ–∫–µ–Ω–æ–≤ –¥–æ—Å—Ç—É–ø–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ (–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä)

**–®–∞–≥ 1:** –ó–∞–π—Ç–∏ –≤ –∞–¥–º–∏–Ω–∫—É –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞
```
http://localhost:8001/admin/directory/quizaccesstoken/add/
```

**–®–∞–≥ 2:** –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–æ–∫–µ–Ω–∞
```python
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
- –≠–∫–∑–∞–º–µ–Ω: [–≤—ã–±—Ä–∞—Ç—å –∏–∑ —Å–ø–∏—Å–∫–∞]
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–≤—ã–±—Ä–∞—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞]
- –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω —Å: 2025-11-04 10:00:00
- –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –¥–æ: 2025-11-04 18:00:00

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏:
- –¢—Ä–µ–±–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é: ‚úÖ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- –†–∞–∑—Ä–µ—à–∏—Ç—å –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ: ‚úÖ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å—Å—è)
- –ú–∞–∫—Å–∏–º—É–º –ø–æ–ø—ã—Ç–æ–∫: 3
- –û–ø–∏—Å–∞–Ω–∏–µ: "–≠–∫–∑–∞–º–µ–Ω –ø–æ –æ—Ö—Ä–∞–Ω–µ —Ç—Ä—É–¥–∞ –¥–ª—è –ò–≤–∞–Ω–æ–≤–∞ –ò.–ò."
```

**–®–∞–≥ 3:** –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ‚Üí –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É
```
http://exam.localhost:8001/directory/quiz/access/a1b2c3d4-e5f6-7890-abcd-ef1234567890/
```

**–®–∞–≥ 4:** –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ (–°–æ—Ç—Ä—É–¥–Ω–∏–∫)

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–≤—ã–π –≤—Ö–æ–¥

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Å—Å—ã–ª–∫—É:
   http://exam.localhost:8001/directory/quiz/access/UUID-—Ç–æ–∫–µ–Ω–∞/

2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Å—ã–ª–∫—É ‚Üí Middleware –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
   ‚úÖ –î–æ–º–µ–Ω = exam.localhost?
   ‚úÖ URL = /directory/quiz/access/*?
   ‚úÖ –¢–æ–∫–µ–Ω —Å—É—â–µ—Å—Ç–≤—É–µ—Ç?
   ‚úÖ –¢–æ–∫–µ–Ω –∞–∫—Ç–∏–≤–µ–Ω (is_active=True)?
   ‚úÖ –¢–æ–∫–µ–Ω –≤ –ø–µ—Ä–∏–æ–¥–µ –¥–µ–π—Å—Ç–≤–∏—è (valid_from <= now <= valid_until)?

3. –ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (require_login=True):
   ‚Üí –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞
   ‚Üí –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –≤–æ–∑–≤—Ä–∞—Ç –∫ —Ç–æ–∫–µ–Ω—É

4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
   ‚úÖ –¢–æ–∫–µ–Ω –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —ç—Ç–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é?
   –ò–õ–ò
   ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å = —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω? (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

5. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Å–µ—Å—Å–∏–∏:
   request.session['quiz_token_mode'] = True
   request.session['quiz_token_id'] = token.id

6. –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —ç–∫–∑–∞–º–µ–Ω–∞:
   ‚Üí /directory/quiz/home/
```

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –†–∞–±–æ—Ç–∞ –≤ —Ç–æ–∫–µ–Ω-—Ä–µ–∂–∏–º–µ

```
–ü–æ–∫–∞ quiz_token_mode = True –≤ —Å–µ—Å—Å–∏–∏:

‚úÖ –†–ê–ó–†–ï–®–ï–ù–û:
   /directory/quiz/*           - –í–°–ï URL –∫–≤–∏–∑–æ–≤
   /media/*                    - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫ –≤–æ–ø—Ä–æ—Å–∞–º
   /static/*                   - CSS, JS, –∏–∫–æ–Ω–∫–∏
   /__debug__/*                - Debug Toolbar (—Ç–æ–ª—å–∫–æ DEBUG=True)
   /favicon.ico                - –ò–∫–æ–Ω–∫–∞ —Å–∞–π—Ç–∞

‚ùå –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù–û:
   /admin/*                    - –ê–¥–º–∏–Ω–∫–∞
   /directory/employees/*      - –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
   /directory/equipment/*      - –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
   /directory/medical/*        - –ú–µ–¥–æ—Å–º–æ—Ç—Ä—ã
   –í–°–Å –û–°–¢–ê–õ–¨–ù–û–ï               - 403 Forbidden

–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
   –í—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–º URL –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ django.log
```

#### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã

```
–¢–æ–∫–µ–Ω-—Ä–µ–∂–∏–º –æ—Å—Ç–∞—ë—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º:
- –î–æ –∑–∞–∫—Ä—ã—Ç–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ (—Å–µ—Å—Å–∏—è)
- –î–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ (valid_until)
- –î–æ logout –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç:
- –ü—Ä–æ—Ö–æ–¥–∏—Ç—å —ç–∫–∑–∞–º–µ–Ω –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö max_attempts)
- –ü—Ä–æ—Ö–æ–¥–∏—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º
- –í–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –∫ —ç–∫–∑–∞–º–µ–Ω—É (–µ—Å–ª–∏ allow_resume=True)
```

### 3. –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–¥–∞

**View: token_access** (`quiz_views.py:687-754`)
```python
def token_access(request, token):
    """–í—Ö–æ–¥ –ø–æ —Ç–æ–∫–µ–Ω—É –¥–æ—Å—Ç—É–ø–∞"""

    # 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ –≤ –ë–î
    token_obj = get_object_or_404(QuizAccessToken, token=token)

    # 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
    if not token_obj.is_active:
        return HttpResponseForbidden("–¢–æ–∫–µ–Ω –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω")

    # 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–∏–æ–¥–∞ –¥–µ–π—Å—Ç–≤–∏—è
    now = timezone.now()
    if now < token_obj.valid_from or now > token_obj.valid_until:
        return HttpResponseForbidden("–¢–æ–∫–µ–Ω –∏—Å—Ç—ë–∫")

    # 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    if token_obj.require_login and not request.user.is_authenticated:
        return redirect(f'/directory/auth/login/?next={request.path}')

    # 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞
    if request.user != token_obj.user and not request.user.is_superuser:
        return HttpResponseForbidden("–¢–æ–∫–µ–Ω –Ω–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –≤–∞–º")

    # 6. –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Ç–æ–∫–µ–Ω-—Ä–µ–∂–∏–º–∞
    request.session['quiz_token_mode'] = True
    request.session['quiz_token_id'] = token_obj.id

    # 7. –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –≥–ª–∞–≤–Ω—É—é
    return redirect('directory:quiz:exam_home')
```

---

## üö´ –ó–∞—â–∏—Ç–∞ –æ—Ç –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

### 1. robots.txt –Ω–∞ exam –ø–æ–¥–¥–æ–º–µ–Ω–µ

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** (`exam_subdomain.py:44-48`)
```python
if request.path == '/robots.txt':
    return HttpResponse(
        "User-agent: *\nDisallow: /\n",
        content_type="text/plain"
    )
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
http://exam.localhost:8001/robots.txt

User-agent: *
Disallow: /
```

–ó–∞–ø—Ä–µ—â–∞–µ—Ç –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é **–í–°–ï–ì–û** –ø–æ–¥–¥–æ–º–µ–Ω–∞ exam.* –ª—é–±—ã–º–∏ –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞–º–∏.

### 2. HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏

**–î–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫–æ –í–°–ï–ú –æ—Ç–≤–µ—Ç–∞–º** –Ω–∞ exam –ø–æ–¥–¥–æ–º–µ–Ω–µ (`exam_subdomain.py:101-133`):

```python
# –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
response['X-Robots-Tag'] = 'noindex, nofollow, noarchive'

# Content Security Policy (–∑–∞—â–∏—Ç–∞ –æ—Ç XSS)
response['Content-Security-Policy'] = (
    "default-src 'self'; "
    "script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net; "
    "style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; "
    "img-src 'self' data: https:; "
    "frame-ancestors 'none'; "
    "base-uri 'self';"
)

# –ó–∞–ø—Ä–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —ç–∫–∑–∞–º–µ–Ω–æ–≤
response['Cache-Control'] = 'no-store, no-cache, must-revalidate, max-age=0'
response['Pragma'] = 'no-cache'
response['Expires'] = '0'

# –ó–∞—â–∏—Ç–∞ –æ—Ç clickjacking
response['X-Frame-Options'] = 'DENY'

# –ó–∞—â–∏—Ç–∞ –æ—Ç MIME-sniffing
response['X-Content-Type-Options'] = 'nosniff'

# HTTPS —Ç–æ–ª—å–∫–æ (–≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)
if not settings.DEBUG:
    response['Strict-Transport-Security'] = 'max-age=31536000'
```

### 3. Meta-—Ç–µ–≥–∏ –≤ —à–∞–±–ª–æ–Ω–∞—Ö

**base_token_mode.html:**
```html
<head>
    <meta name="robots" content="noindex, nofollow, noarchive">
    <meta name="googlebot" content="noindex, nofollow">
    <meta name="yandex" content="noindex, nofollow">
</head>
```

### 4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ –¥–æ—Å—Ç—É–ø–∞

**–í—Å–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:**

```python
[WARNING] 2025-11-04 15:22:32 exam_security:
Exam subdomain access blocked:
IP=192.168.1.100,
Path=/directory/employees/,
Method=GET,
User=ivanov,
Reason=Blocked: not quiz URL in token mode,
User-Agent=Mozilla/5.0 ...
```

**–ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤:**
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
tail -f django.log | grep "exam_security"

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ IP
grep "exam_security" django.log | awk '{print $6}' | sort | uniq -c

# –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ (–±–æ—Ç—ã)
grep "exam_security" django.log | grep -i "bot\|crawler\|spider"
```

---

## üõ°Ô∏è Middleware –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### ExamSubdomainMiddleware

**–§–∞–π–ª:** `directory/middleware/exam_subdomain.py`

**–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**

```python
def __call__(self, request):
    host = request.get_host().lower()

    # 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–µ–Ω–∞
    is_exam_subdomain = (
        host.startswith('exam.') or
        host.startswith('exam:')
    )

    if not is_exam_subdomain:
        # –û—Å–Ω–æ–≤–Ω–æ–π –¥–æ–º–µ–Ω - —Ä–∞–∑—Ä–µ—à–∞–µ–º –≤—Å—ë
        return self.get_response(request)

    # ===== EXAM –ü–û–î–î–û–ú–ï–ù =====

    # 2. robots.txt ‚Üí Disallow: /
    if request.path == '/robots.txt':
        return HttpResponse("User-agent: *\nDisallow: /\n")

    # 3. Debug Toolbar (—Ç–æ–ª—å–∫–æ DEBUG)
    if request.path.startswith('/__debug__/'):
        if settings.DEBUG:
            return self.get_response(request)
        return HttpResponseForbidden()

    # 4. –°—Ç–∞—Ç–∏–∫–∞/–º–µ–¥–∏–∞ ‚Üí —Ä–∞–∑—Ä–µ—à–µ–Ω–æ
    if request.path.startswith('/static/') or request.path.startswith('/media/'):
        return self.get_response(request)

    # 5. –¢–æ–∫–µ–Ω-—Ä–µ–∂–∏–º –∞–∫—Ç–∏–≤–µ–Ω?
    token_mode = request.session.get('quiz_token_mode', False)

    if token_mode:
        # –†–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ quiz URL
        if request.path.startswith('/directory/quiz/'):
            return self.get_response(request)
        else:
            # –ë–õ–û–ö–ò–†–û–í–ö–ê + –õ–û–ì–ò–†–û–í–ê–ù–ò–ï
            self._log_blocked_access(request, "not quiz URL in token mode")
            return HttpResponseForbidden("Access Denied")

    # 6. –ë–µ–∑ —Ç–æ–∫–µ–Ω-—Ä–µ–∂–∏–º–∞ - —Ç–æ–ª—å–∫–æ –≤—Ö–æ–¥ –ø–æ —Ç–æ–∫–µ–Ω—É
    allowed = [
        '/directory/quiz/access/',
        '/directory/auth/login/',
        '/accounts/login/',
    ]

    for path in allowed:
        if request.path.startswith(path):
            return self.get_response(request)

    # 7. –í–°–Å –û–°–¢–ê–õ–¨–ù–û–ï ‚Üí 403
    self._log_blocked_access(request, "no token mode")
    return HttpResponseForbidden("Access Denied")
```

---

## üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### 1. Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–§–∞–π–ª:** `/etc/nginx/sites-available/ot_online`

```nginx
# –û—Å–Ω–æ–≤–Ω–æ–π –¥–æ–º–µ–Ω
server {
    listen 80;
    server_name yourdomain.com www.yourdomain.com;

    # Redirect to HTTPS
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name yourdomain.com www.yourdomain.com;

    ssl_certificate /etc/letsencrypt/live/yourdomain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/yourdomain.com/privkey.pem;

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    location /static/ {
        alias /var/www/ot_online/staticfiles/;
        expires 30d;
    }

    location /media/ {
        alias /var/www/ot_online/media/;
        expires 7d;
    }
}

# EXAM –ø–æ–¥–¥–æ–º–µ–Ω (–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
server {
    listen 80;
    server_name exam.yourdomain.com;

    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name exam.yourdomain.com;

    ssl_certificate /etc/letsencrypt/live/yourdomain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/yourdomain.com/privkey.pem;

    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
    add_header X-Robots-Tag "noindex, nofollow, noarchive" always;
    add_header X-Frame-Options "DENY" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header Referrer-Policy "no-referrer" always;

    # –ó–∞–ø—Ä–µ—Ç –Ω–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é
    location = /robots.txt {
        add_header Content-Type text/plain;
        return 200 "User-agent: *\nDisallow: /\n";
    }

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    location /static/ {
        alias /var/www/ot_online/staticfiles/;
        expires 7d;  # –ú–µ–Ω—å—à–µ –∫–µ—à –¥–ª—è exam
    }

    location /media/ {
        alias /var/www/ot_online/media/;
        expires 1d;  # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–µ—à –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤–æ–ø—Ä–æ—Å–æ–≤
    }
}
```

### 2. Django settings (–ø—Ä–æ–¥–∞–∫—à–µ–Ω)

**settings.py:**
```python
# –î–æ–º–µ–Ω—ã
ALLOWED_HOSTS = ['yourdomain.com', 'www.yourdomain.com', 'exam.yourdomain.com']

# HTTPS
SECURE_SSL_REDIRECT = True
SESSION_COOKIE_SECURE = True
CSRF_COOKIE_SECURE = True

# Exam –ø–æ–¥–¥–æ–º–µ–Ω
EXAM_SUBDOMAIN = 'exam.yourdomain.com'
EXAM_PROTOCOL = 'https'

# Security headers (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∫ middleware)
SECURE_HSTS_SECONDS = 31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS = True
SECURE_HSTS_PRELOAD = True
SECURE_CONTENT_TYPE_NOSNIFF = True
SECURE_BROWSER_XSS_FILTER = True
X_FRAME_OPTIONS = 'DENY'
```

### 3. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

```env
# –ü—Ä–æ–¥–∞–∫—à–µ–Ω
DJANGO_DEBUG=False
DJANGO_ALLOWED_HOSTS=yourdomain.com,www.yourdomain.com,exam.yourdomain.com

# Exam –ø–æ–¥–¥–æ–º–µ–Ω
EXAM_SUBDOMAIN=exam.yourdomain.com
EXAM_PROTOCOL=https

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=postgresql://user:password@localhost:5432/ot_online

# Email –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
SECURITY_EMAIL=admin@yourdomain.com
```

### 4. SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (Let's Encrypt)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot
sudo apt install certbot python3-certbot-nginx

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –¥–ª—è –æ–±–æ–∏—Ö –¥–æ–º–µ–Ω–æ–≤
sudo certbot --nginx -d yourdomain.com -d www.yourdomain.com -d exam.yourdomain.com

# –ê–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ
sudo certbot renew --dry-run
```

### 5. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**

```python
# settings.py
LOGGING = {
    'version': 1,
    'handlers': {
        'file_exam_security': {
            'level': 'WARNING',
            'class': 'logging.handlers.RotatingFileHandler',
            'filename': '/var/log/ot_online/exam_security.log',
            'maxBytes': 10485760,  # 10MB
            'backupCount': 10,
        },
    },
    'loggers': {
        'exam_security': {
            'handlers': ['file_exam_security'],
            'level': 'WARNING',
        },
    },
}
```

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å –ø–æ–º–æ—â—å—é fail2ban:**

```bash
# /etc/fail2ban/filter.d/exam-access.conf
[Definition]
failregex = Exam subdomain access blocked: IP=<HOST>
ignoreregex =

# /etc/fail2ban/jail.local
[exam-access]
enabled = true
port = http,https
filter = exam-access
logpath = /var/log/ot_online/exam_security.log
maxretry = 10
bantime = 3600
findtime = 600
```

**Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**

```python
# –ü—Ä–∏ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
if suspicious_activity_detected:
    from django.core.mail import send_mail

    send_mail(
        'SECURITY: –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ exam –ø–æ–¥–¥–æ–º–µ–Ω–µ',
        f'IP: {ip}\n–ü–æ–ø—ã—Ç–æ–∫: {count}\nURL: {blocked_urls}',
        'noreply@yourdomain.com',
        ['admin@yourdomain.com'],
        fail_silently=False,
    )
```

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω:

```
‚úÖ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è –æ–±–æ–∏—Ö –¥–æ–º–µ–Ω–æ–≤
‚úÖ ALLOWED_HOSTS —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–±–∞ –¥–æ–º–µ–Ω–∞
‚úÖ DEBUG=False
‚úÖ SECURE_SSL_REDIRECT=True
‚úÖ SESSION_COOKIE_SECURE=True
‚úÖ CSRF_COOKIE_SECURE=True
‚úÖ ExamSubdomainMiddleware –≤ MIDDLEWARE
‚úÖ robots.txt –Ω–∞ exam.* –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Disallow: /
‚úÖ Nginx –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

**1. –ü—Ä–æ–≤–µ—Ä–∫–∞ robots.txt:**
```bash
curl https://exam.yourdomain.com/robots.txt

# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
User-agent: *
Disallow: /
```

**2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤:**
```bash
curl -I https://exam.yourdomain.com/

# –û–∂–∏–¥–∞–µ–º—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏:
X-Robots-Tag: noindex, nofollow, noarchive
X-Frame-Options: DENY
X-Content-Type-Options: nosniff
Strict-Transport-Security: max-age=31536000
```

**3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –±–µ–∑ —Ç–æ–∫–µ–Ω–∞:**
```bash
curl https://exam.yourdomain.com/directory/employees/

# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 403 Forbidden
```

**4. –ü—Ä–æ–≤–µ—Ä–∫–∞ Google Search Console:**
- –î–æ–±–∞–≤–∏—Ç—å exam.yourdomain.com
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
- –ó–∞–ø—Ä–æ—Å–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∏–∑ –∏–Ω–¥–µ–∫—Å–∞ (–µ—Å–ª–∏ —É–∂–µ –±—ã–ª–æ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–æ)

---

## üÜò FAQ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**Q: –ú–æ–∂–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–±–æ–π—Ç–∏ —Ç–æ–∫–µ–Ω-—Ä–µ–∂–∏–º?**
A: –ù–µ—Ç. Middleware –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ö–ê–ñ–î–´–ô –∑–∞–ø—Ä–æ—Å –Ω–∞ —É—Ä–æ–≤–Ω–µ HTTP. –î–∞–∂–µ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–Ω–∞–µ—Ç URL, –±–µ–∑ —Ç–æ–∫–µ–Ω–∞ –≤ —Å–µ—Å—Å–∏–∏ –¥–æ—Å—Ç—É–ø –±—É–¥–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω.

**Q: –ß—Ç–æ –µ—Å–ª–∏ —Ç–æ–∫–µ–Ω —É—Ç—ë–∫ —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º?**
A: –¢–æ–∫–µ–Ω –º–æ–∂–Ω–æ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤ –∞–¥–º–∏–Ω–∫–µ (is_active=False). –¢–∞–∫–∂–µ –µ—Å—Ç—å –ø–µ—Ä–∏–æ–¥ –¥–µ–π—Å—Ç–≤–∏—è (valid_until).

**Q: –ò–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç –ª–∏ Google exam –ø–æ–¥–¥–æ–º–µ–Ω?**
A: –ù–µ—Ç, –µ—Å–ª–∏:
- robots.txt –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- X-Robots-Tag –¥–æ–±–∞–≤–ª–µ–Ω
- Meta-—Ç–µ–≥–∏ –≤ —à–∞–±–ª–æ–Ω–∞—Ö
–í—Å—ë —ç—Ç–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω —Ç–æ–∫–µ–Ω –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π?**
A: –ù–µ—Ç, —Ç–æ–∫–µ–Ω –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (user FK). –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –æ–¥–Ω–æ–≥–æ —ç–∫–∑–∞–º–µ–Ω–∞.

**Q: –ß—Ç–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞–∫—Ä—ã–ª –±—Ä–∞—É–∑–µ—Ä –ø–æ—Å–ª–µ —ç–∫–∑–∞–º–µ–Ω–∞?**
A: –¢–æ–∫–µ–Ω-—Ä–µ–∂–∏–º –æ—Å—Ç–∞—ë—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º, –Ω–æ:
- –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ quiz URL
- –î–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω–∫–µ/–¥—Ä—É–≥–∏–º –¥–∞–Ω–Ω—ã–º –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
- –ü–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ (valid_until) –¥–æ—Å—Ç—É–ø –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç—Å—è

**Q: –õ–æ–≥–∏—Ä—É—é—Ç—Å—è –ª–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤ —ç–∫–∑–∞–º–µ–Ω–∞?**
A: –î–∞, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ. –°–µ–π—á–∞—Å –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:
- –ù–∞—á–∞–ª–æ –ø–æ–ø—ã—Ç–∫–∏ (QuizAttempt)
- –ö–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç (UserAnswer)
- –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (exam_security.log)

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `tail -f /var/log/ot_online/exam_security.log`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Django: `python manage.py check --deploy`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Nginx: `sudo nginx -t`
4. –°–≤—è–∂–∏—Ç–µ—Å—å —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —Å–∏—Å—Ç–µ–º—ã
